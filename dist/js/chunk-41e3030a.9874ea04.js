(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41e3030a"],{1276:function(e,t,a){"use strict";var n=a("d784"),i=a("44e7"),r=a("825a"),o=a("1d80"),s=a("4840"),c=a("8aa5"),l=a("50c4"),u=a("14c3"),d=a("9263"),f=a("d039"),g=[].push,p=Math.min,h=4294967295,m=!f((function(){return!RegExp(h,"y")}));n("split",2,(function(e,t,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var n=String(o(this)),r=void 0===a?h:a>>>0;if(0===r)return[];if(void 0===e)return[n];if(!i(e))return t.call(n,e,r);var s,c,l,u=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,m=new RegExp(e.source,f+"g");while(s=d.call(m,n)){if(c=m.lastIndex,c>p&&(u.push(n.slice(p,s.index)),s.length>1&&s.index<n.length&&g.apply(u,s.slice(1)),l=s[0].length,p=c,u.length>=r))break;m.lastIndex===s.index&&m.lastIndex++}return p===n.length?!l&&m.test("")||u.push(""):u.push(n.slice(p)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var i=o(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,i,a):n.call(String(i),t,a)},function(e,i){var o=a(n,e,this,i,n!==t);if(o.done)return o.value;var d=r(e),f=String(this),g=s(d,RegExp),v=d.unicode,y=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(m?"y":"g"),b=new g(m?d:"^(?:"+d.source+")",y),_=void 0===i?h:i>>>0;if(0===_)return[];if(0===f.length)return null===u(b,f)?[f]:[];var w=0,x=0,P=[];while(x<f.length){b.lastIndex=m?x:0;var C,I=u(b,m?f:f.slice(x));if(null===I||(C=p(l(b.lastIndex+(m?0:x)),f.length))===w)x=c(f,x,v);else{if(P.push(f.slice(w,x)),P.length===_)return P;for(var k=1;k<=I.length-1;k++)if(P.push(I[k]),P.length===_)return P;x=w=C}}return P.push(f.slice(w)),P}]}),!m)},3657:function(e,t,a){},"365c":function(e,t,a){"use strict";var n=a("be3b"),i=a("99b1"),r=a.n(i),o={createRole:function(e){return n["a"].post(r.a.CreateRole,e)},roles:function(e,t){return n["a"].get(r.a.Roles,{currentPage:e,perPage:t})},delRoles:function(e){return n["a"].del(r.a.Roles,{id:e})},createUser:function(e){return n["a"].post(r.a.CreateUser,e)},users:function(e,t){return n["a"].get(r.a.Users,{currentPage:e,perPage:t})},delUser:function(e){return n["a"].del(r.a.DelUser,{id:e})},resetPassword:function(e){return n["a"].post(r.a.ResetPassword,e)},createHealthUser:function(e){return n["a"].post(r.a.HealthUser,e)},healthUser:function(){return n["a"].get(r.a.HealthUser,{})},merchants:function(e,t,a){return n["a"].get(r.a.Merchants,{currentPage:e,perPage:t,name:a})},merchantsSelect:function(){return n["a"].get(r.a.MerchantsSelect,{})},createMerchant:function(e){return n["a"].post(r.a.CreateMerchant,e)},areas:function(e,t){return n["a"].get(r.a.Areas,{type:e,parent_id:t})},createBanner:function(e){return n["a"].post(r.a.CreateBanner,e)},banners:function(e,t){return n["a"].get(r.a.Banners,{currentPage:e,perPage:t})},delBanner:function(e){return n["a"].del(r.a.DelBanner,{id:e})},createDocumentType:function(e){return n["a"].post(r.a.CreateDocumentType,e)},documentType:function(e,t){return n["a"].get(r.a.DocumentType,{currentPage:e,perPage:t})},delDocumentType:function(e){return n["a"].del(r.a.DelDocumentType,{id:e})},createDocument:function(e){return n["a"].post(r.a.CreateDocument,e)},document:function(e,t,a){return n["a"].get(r.a.Document,{currentPage:e,perPage:t,document_type:a})},delDocument:function(e){return n["a"].del(r.a.DelDocument,{id:e})},createClassify:function(e){return n["a"].post(r.a.CreateClassify,e)},classifies:function(e,t,a){return n["a"].get(r.a.Classify,{currentPage:e,perPage:t,type:a})},delClassify:function(e){return n["a"].del(r.a.Classify,{id:e})},seleClassify:function(e,t){return n["a"].get(r.a.SeleClassify,{type:e,parent_id:t})},createGoods:function(e){return n["a"].post(r.a.CreateGoods,e)},goods:function(e,t,a,i,o){return n["a"].get(r.a.Goods,{currentPage:e,perPage:t,name:a,classify_id:i,on_shelf:o})},goodDetail:function(e){return n["a"].get(r.a.GoodDetail,{id:e})},createUserGoods:function(e){return n["a"].post(r.a.CreateUserGoods,e)},userGoods:function(e,t,a,i){return n["a"].get(r.a.UserGoods,{currentPage:e,perPage:t,name:a,on_shelf:i})},userGoodDetail:function(e){return n["a"].get(r.a.UserGoodDetail,{id:e})},createKeyword:function(e){return n["a"].post(r.a.CreateKeyword,e)},keywords:function(e,t,a){return n["a"].get(r.a.Keywords,{currentPage:e,perPage:t,keyword:a})},delKeyword:function(e){return n["a"].del(r.a.DelKeyword,{id:e})},createActivity:function(e){return n["a"].post(r.a.CreateActivity,e)},activities:function(e,t){return n["a"].get(r.a.Activities,{currentPage:e,perPage:t})},wxUser:function(e,t,a,i){return n["a"].get(r.a.WxUser,{currentPage:e,perPage:t,user_id:a,nickname:i})},userInfo:function(e,t,a,i){return n["a"].get(r.a.UserInfo,{currentPage:e,perPage:t,name:a,state:i})},healthCheck:function(e,t){return n["a"].post(r.a.HealthCheck,{id:e,state:t})},healthUserList:function(e,t,a){return n["a"].get(r.a.HealthUserList,{currentPage:e,perPage:t,name:a})},healthApplyList:function(e,t,a,i){return n["a"].get(r.a.HealthApplyList,{currentPage:e,perPage:t,name:a,state:i})},withdrawsList:function(e,t,a,i){return n["a"].get(r.a.WithdrawsList,{currentPage:e,perPage:t,name:a,state:i})},withdrawsCheck:function(e,t,a){return n["a"].post(r.a.WithdrawsCheck,{id:e,state:t,remark:a})},underlingUser:function(e,t,a){return n["a"].get(r.a.UnderlingUser,{currentPage:e,perPage:t,user_id:a})},commissionSource:function(e,t,a){return n["a"].get(r.a.CommissionSource,{currentPage:e,perPage:t,user_id:a})},merCommission:function(e,t,a){return n["a"].get(r.a.MerCommission,{currentPage:e,perPage:t,merchant_id:a})},moneyEmpty:function(e){return n["a"].post(r.a.MoneyEmpty,{user_id:e})},createSpecialists:function(e){return n["a"].post(r.a.CreateSpecialists,e)},specialists:function(e,t,a){return n["a"].get(r.a.Specialists,{currentPage:e,perPage:t,name:a})},delSpecialist:function(e){return n["a"].del(r.a.DelSpecialist,{id:e})},userOrder:function(e,t,a,i,o){return n["a"].get(r.a.UserOrder,{currentPage:e,perPage:t,status:a,no:i,good_id:o})},shopingpInfo:function(e,t){return n["a"].get(r.a.ShopingpInfo,{order_id:e,type:t})},recaptionInfo:function(e,t){return n["a"].get(r.a.RecaptionInfo,{order_id:e,type:t})},orders:function(e,t,a,i,o){return n["a"].get(r.a.Orders,{currentPage:e,perPage:t,status:a,no:i,good_id:o})},ordersGoods:function(e){return n["a"].get(r.a.OrdersGoods,{order_id:e})},confirmShipments:function(e,t,a,i){return n["a"].post(r.a.ConfirmShipments,{order_id:e,type:t,express_no:a,logistics_id:i})},creationLogistic:function(e){return n["a"].post(r.a.CreationLogistic,e)},logistics:function(e,t,a){return n["a"].get(r.a.Logistics,{currentPage:e,perPage:t,name:a})},delLogistic:function(e){return n["a"].del(r.a.DelLogistic,{id:e})},OrderInquire:function(e,t){return n["a"].get(r.a.OrderInquire,{express_no:e,logistics_id:t})}};t["a"]=o},be38:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addActivity}},[e._v("添加活动")])],1)]),a("el-dialog",{attrs:{visible:e.dialogActivity,title:"添加商品",width:"1200px"},on:{"update:visible":function(t){e.dialogActivity=t},close:e.close}},[a("el-form",{attrs:{"label-width":"150px",model:e.activityInfo}},[a("el-form-item",{attrs:{label:"是否上架"}},[a("el-radio-group",{model:{value:e.activityInfo.on_shelf,callback:function(t){e.$set(e.activityInfo,"on_shelf",t)},expression:"activityInfo.on_shelf"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"折扣"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"（格式：75折 = 0.75）"},model:{value:e.activityInfo.discount,callback:function(t){e.$set(e.activityInfo,"discount",t)},expression:"activityInfo.discount"}})],1),a("el-form-item",{attrs:{label:"活动结束时间"}},[a("el-date-picker",{staticStyle:{width:"400px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.activityInfo.date,callback:function(t){e.$set(e.activityInfo,"date",t)},expression:"activityInfo.date"}})],1),a("el-form-item",{attrs:{label:"商品"}},[a("el-select",{staticStyle:{width:"400px"},attrs:{multiple:"",placeholder:"请选择商品(可多选)"},on:{change:e.classifyChange},model:{value:e.activityInfo.good_id,callback:function(t){e.$set(e.activityInfo,"good_id",t)},expression:"activityInfo.good_id"}},e._l(e.goodsList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{ref:"upload",attrs:{action:"https://api.fengniaotuangou.cn/api/upload",limit:1,"before-upload":e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,"on-remove":e.handleRemove,"file-list":e.files,"on-exceed":e.handleExceed,"list-type":"picture-card","on-change":e.handleChange,"auto-upload":!0}},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1),a("el-form-item",{attrs:{label:"背景"}},[a("el-upload",{ref:"upload",attrs:{action:"https://api.fengniaotuangou.cn/api/upload",limit:1,"before-upload":e.beforeAvatarUpload1,"on-remove":e.handleRemove1,"on-exceed":e.handleExceed1,"auto-upload":!0,"on-change":e.handleChange1,multiple:"","list-type":"picture-card","file-list":e.fileLists,"on-success":e.handleAvatarSuccess1}},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.newActivity}},[e._v("提交")])],1)],1)],1)],1),a("el-table",{attrs:{data:e.tableData,"empty-text":"暂无数据",border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"img",label:"图片",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.img?a("div",[a("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.img}}),a("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.img},slot:"reference"})])],1):a("div",[a("span",[e._v("--暂无图片--")])])]}}])}),a("el-table-column",{attrs:{prop:"background",label:"背景图片",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.background?a("div",[a("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.background}}),a("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.background},slot:"reference"})])],1):a("div",[a("span",[e._v("--暂无图片--")])])]}}])}),a("el-table-column",{attrs:{prop:"on_shelf",label:"是否上架"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.on_shelf?a("div",[a("span",[e._v("是")])]):e._e(),2==t.row.on_shelf?a("div",[a("span",[e._v("否")])]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"discount",label:"折扣（75折 = 0.75）",width:"180"}}),a("el-table-column",{attrs:{prop:"date",label:"活动结束日期",width:"180"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"180"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,30,40,50],"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"size-change":e.sizeChange}})],1)],1)},i=[],r=(a("4160"),a("caad"),a("ac1f"),a("2532"),a("1276"),a("159b"),a("365c")),o={inject:["reload"],data:function(){return{loading:!0,tableData:[],current:1,size:10,total:0,dialogActivity:!1,activityInfo:{img:"",background:"",good_id:[],discount:"",date:"",on_shelf:1},fileLists:[],files:[],goodsList:[],permissionData:[]}},mounted:function(){this.getList(this.current,this.size),this.getGoods(),this.permissionData=localStorage.getItem("permissions").split(",")},methods:{getList:function(e,t){var a=this;r["a"].activities(e,t).then((function(e){a.loading=!1,a.tableData=e.result.data,a.total=e.result.total})).catch((function(e){a.loading=!1}))},getGoods:function(){var e=this;r["a"].goods(1,50).then((function(t){t.result.data.forEach((function(t){1==t.on_shelf&&e.goodsList.push(t)}))}))},classifyChange:function(e){var t=this;t.activityInfo.good_id=e},currentChange:function(e){var t=this;t.current=e,t.loading=!0,t.getList(e,t.size)},sizeChange:function(e){var t=this;t.size=e,t.loading=!0,t.current=1,t.getList(1,e)},addActivity:function(){var e=this;e.permissionData.includes("activityAdd")?(e.dialogActivity=!0,e.activityInfo={img:"",background:"",good_id:[],discount:"",date:"",on_shelf:1},e.$refs.upload&&e.$refs.upload.clearFiles()):e.$message.warning("无权操作")},newActivity:function(){var e=this;e.activityInfo.img&&e.activityInfo.background&&e.activityInfo.good_id&&e.activityInfo.discount&&e.activityInfo.date?r["a"].createActivity(e.activityInfo).then((function(t){1e4==t.code&&(e.$message.success(t.toast),e.dialogActivity=!1,e.activityInfo={},e.getList(e.current,e.size))})):e.$message.warning("请填写完整信息")},handleDetail:function(e,t){var a=this,n=[];if(console.log(t),a.permissionData.includes("kactivityEdit")){a.dialogActivity=!0,t.goods.forEach((function(e){n.push(e.id)})),a.activityInfo={img:t.img,background:t.background,good_id:n,discount:t.discount,date:t.date,on_shelf:t.on_shelf,id:t.id};var i=a.activityInfo.background.split(",");i.forEach((function(e){var t=new Object;t.url=e,a.fileLists.push(t)}));var r=a.activityInfo.img.split(",");r.forEach((function(e){var t=new Object;t.url=e,a.files.push(t)}))}else a.$message.warning("无权操作")},close:function(){var e=this;e.fileLists=[],e.files=[]},handleRemove:function(e,t){var a=this;a.files=t,a.activityInfo.img=""},beforeAvatarUpload:function(e){var t=307200;return t||this.$message.error("上传图片大小不能超过300KB"),t},handleAvatarSuccess:function(e,t){var a=this;a.activityInfo.img=t.response.data},handleExceed:function(e,t){var a=this;a.$message.error("上传图片不能超过1张!")},handleChange:function(e,t){var a=this;a.files=t},handleRemove1:function(e,t){var a=this;a.files=t,a.activityInfo.background=""},beforeAvatarUpload1:function(e){var t=307200;return t||this.$message.error("上传图片大小不能超过300KB"),t},handleAvatarSuccess1:function(e,t){var a=this;a.activityInfo.background=t.response.data},handleExceed1:function(e,t){var a=this;a.$message.error("上传图片不能超过1张!")},handleChange1:function(e,t){var a=this;a.fileLists=t}}},s=o,c=(a("c550"),a("2877")),l=Object(c["a"])(s,n,i,!1,null,"57373d79",null);t["default"]=l.exports},c550:function(e,t,a){"use strict";a("3657")}}]);
//# sourceMappingURL=chunk-41e3030a.9874ea04.js.map